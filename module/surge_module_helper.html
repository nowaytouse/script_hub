<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgeæ¨¡å—å¯¼å…¥åŠ©æ‰‹ - script_hub</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro', sans-serif;
            background: #1a1a2e;
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 5px; font-size: 1.8em; }
        .subtitle { text-align: center; color: #888; margin-bottom: 20px; font-size: 0.9em; }
        
        .stats {
            display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;
        }
        .stat {
            background: rgba(255,255,255,0.1); padding: 10px 20px; border-radius: 10px; text-align: center;
        }
        .stat-num { font-size: 1.5em; font-weight: bold; }
        .stat-label { color: #888; font-size: 0.8em; }
        .stat.copied .stat-num { color: #4CAF50; }
        
        .actions {
            display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;
        }
        .action-btn {
            background: rgba(255,255,255,0.1); border: none; color: #fff;
            padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 0.9em;
        }
        .action-btn:hover { background: rgba(255,255,255,0.2); }
        .action-btn.danger { background: rgba(244,67,54,0.3); }
        .action-btn.danger:hover { background: rgba(244,67,54,0.5); }
        
        .category {
            background: rgba(255,255,255,0.05); border-radius: 12px;
            margin-bottom: 15px; overflow: hidden;
        }
        .category-header {
            display: flex; align-items: center; gap: 10px;
            padding: 12px 15px; background: rgba(255,255,255,0.05);
            cursor: pointer; user-select: none;
        }
        .category-header:hover { background: rgba(255,255,255,0.08); }
        .category-icon { font-size: 1.2em; }
        .category-title { flex: 1; font-weight: 500; }
        .category-count {
            background: rgba(255,255,255,0.2); padding: 2px 8px;
            border-radius: 10px; font-size: 0.8em;
        }
        .category-toggle { color: #888; transition: transform 0.2s; }
        .category.collapsed .category-toggle { transform: rotate(-90deg); }
        .category.collapsed .modules { display: none; }
        
        .modules { padding: 10px; }
</style>
</head>
<body>
<div class="container">
    <h1>ğŸš€ Surgeæ¨¡å—å¯¼å…¥åŠ©æ‰‹</h1>
    <p class="subtitle">ç‚¹å‡»å¤åˆ¶URL â†’ ç²˜è´´åˆ°Surge â†’ è‡ªåŠ¨è®°å½•å·²å¤åˆ¶</p>
    
    <div class="stats">
        <div class="stat"><div class="stat-num" id="totalCount">0</div><div class="stat-label">æ€»æ¨¡å—</div></div>
        <div class="stat copied"><div class="stat-num" id="copiedCount">0</div><div class="stat-label">å·²å¤åˆ¶</div></div>
        <div class="stat"><div class="stat-num" id="remainCount">0</div><div class="stat-label">å‰©ä½™</div></div>
    </div>
    
    <div class="actions">
        <button class="action-btn" onclick="copyAllRemaining()">ğŸ“‹ å¤åˆ¶æ‰€æœ‰å‰©ä½™</button>
        <button class="action-btn" onclick="exportProgress()">ğŸ’¾ å¯¼å‡ºè¿›åº¦</button>
        <button class="action-btn danger" onclick="resetProgress()">ğŸ”„ é‡ç½®è¿›åº¦</button>
    </div>
    
    <div id="moduleList"></div>
</div>

<script>
// æ¨¡å—æ•°æ® - æ•´åˆåçš„ç²¾ç®€ç‰ˆæœ¬
const modules = {
    "amplify_nexus": {
        name: "ğŸ› ï¸ Amplify Nexus â€º å¢å¹…æ¢çº½",
        color: "#4CAF50",
        desc: "åŠŸèƒ½å¢å¼ºç±»æ¨¡å—",
        items: [
            { name: "BiliBili.Enhanced", desc: "Bç«™å¢å¼º(ç”»è´¨/ä¸‹è½½)", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/BiliBili.Enhanced.sgmodule", tag: "bilibili" },
            { name: "BiliBili.Global", desc: "Bç«™æ¸¯æ¾³å°è§£é”", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/BiliBili.Global.sgmodule", tag: "bilibili" },
            { name: "BiliBili.Redirect", desc: "Bç«™é‡å®šå‘", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/BiliBili.Redirect.sgmodule", tag: "bilibili" },
            { name: "YouTube.Enhance", desc: "YouTubeå¢å¼º", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/YouTube.Enhance.sgmodule", tag: "youtube" },
            { name: "DualSubs.Universal", desc: "åŒè¯­å­—å¹•", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/DualSubs.Universal.sgmodule" },
            { name: "iRingo.Maps", desc: "Appleåœ°å›¾å¢å¼º", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/iRingo.Maps.sgmodule", tag: "iringo" },
            { name: "iRingo.News", desc: "Apple Newsè§£é”", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/iRingo.News.sgmodule", tag: "iringo" },
            { name: "iRingo.TV", desc: "Apple TV+å¢å¼º", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/iRingo.TV.sgmodule", tag: "iringo" },
            { name: "iRingo.WeatherKit", desc: "å¤©æ°”å¢å¼º", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/iRingo.WeatherKit.sgmodule", tag: "iringo" },
            { name: "TikTok-US", desc: "TikTokè§£é”", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/TiKTok-US.sgmodule" },
            { name: "boxjs.rewrite.surge", desc: "BoxJSé¢æ¿", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/boxjs.rewrite.surge.sgmodule", tag: "tool" },
            { name: "Sub_Info", desc: "è®¢é˜…ä¿¡æ¯é¢æ¿", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/Sub_Info.sgmodule", tag: "tool" },
            { name: "Timecard", desc: "èŠ‚å‡æ—¥å€’è®¡æ—¶", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/Timecard.sgmodule", tag: "tool" },
            { name: "DNSæ¨¡å—", desc: "DNSåˆ†æµä¼˜åŒ–", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/DNS.sgmodule", tag: "dns" },
            { name: "Encrypted DNS", desc: "åŠ å¯†DNS", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/Encrypted%20DNS%20Module%20%F0%9F%94%92%F0%9F%9B%A1%EF%B8%8FDNS.sgmodule", tag: "dns" },
            { name: "ğŸŸ DNSåˆ†æµ", desc: "DNSæ™ºèƒ½åˆ†æµ", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/%F0%9F%8D%9F%20DNS%20%E5%88%86%E6%B5%81.official.sgmodule", tag: "dns" },
            { name: "General Enhanced", desc: "é€šç”¨å¢å¼º", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/%F0%9F%9A%80%F0%9F%92%AAGeneral%20Enhanced%E2%AC%86%EF%B8%8F%E2%AC%86%EF%B8%8F%20plus.sgmodule" },
            { name: "URL Rewrite", desc: "URLé‡å†™", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/URL%20Rewrite%20Module%20%F0%9F%94%84%F0%9F%8C%90.sgmodule" },
            { name: "iCloud Private Relay", desc: "iCloudä¸­ç»§", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/iCloud_Private_Relay_Gateway.sgmodule" },
            { name: "VVebo_Repair", desc: "VVeboä¿®å¤", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/VVebo_Repair.sgmodule" },
            { name: "Surge-Beta", desc: "Surgeæµ‹è¯•åŠŸèƒ½", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/Surge-Beta.sgmodule", tag: "tool" },
            { name: "QX-resource-preview", desc: "èµ„æºé¢„è§ˆ", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/QX-resource-preview.sgmodule", tag: "tool" },
            { name: "net-lsp-x", desc: "ç½‘ç»œè¯Šæ–­", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/amplify_nexus/net-lsp-x.sgmodule", tag: "tool" }
        ]
    },
    "head_expanse": {
        name: "ğŸ” Head Expanse â€º é¦–ç«¯æ‰©åŸŸ",
        color: "#2196F3",
        desc: "å¹¿å‘Šæ‹¦æˆªå¹³å°ç±»",
        items: [
            { name: "â­ Script Hub", desc: "è„šæœ¬è½¬æ¢æ ¸å¿ƒ(å¿…è£…)", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%E2%AD%90%EF%B8%8F%20Script%20Hub.official.sgmodule", essential: true },
            { name: "å¯è‰å¹¿å‘Šè¿‡æ»¤å™¨", desc: "ç»¼åˆå»å¹¿å‘Š(æ¨è)", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%E5%8F%AF%E8%8E%89%E5%B9%BF%E5%91%8A%E8%BF%87%E6%BB%A4%E5%99%A8.beta.sgmodule", essential: true },
            { name: "All-in-One-2.x", desc: "å…¨èƒ½å»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/All-in-One-2.x.sgmodule" },
            { name: "AllInOne_Mock", desc: "Mockå»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/AllInOne_Mock.sgmodule" },
            { name: "æ–°æ‰‹å‹å¥½å»å¹¿å‘Šé›†åˆ", desc: "å…¥é—¨æ¨è", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%E6%96%B0%E6%89%8B%E5%8F%8B%E5%A5%BD%E3%81%AE%E5%8E%BB%E5%B9%BF%E5%91%8A%E9%9B%86%E5%90%88.official.sgmodule" },
            { name: "å¹¿å‘Šå¹³å°æ‹¦æˆªå™¨", desc: "å¹¿å‘ŠSDKæ‹¦æˆª", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%E5%B9%BF%E5%91%8A%E5%B9%B3%E5%8F%B0%E6%8B%A6%E6%88%AA%E5%99%A8.sgmodule" },
            { name: "å¹¿å‘Šè”ç›Ÿ", desc: "å¹¿å‘Šè”ç›Ÿæ‹¦æˆª", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%E5%B9%BF%E5%91%8A%E8%81%94%E7%9B%9F.official.sgmodule" },
            { name: "å°ç¨‹åºæ‡’äººå»å¹¿å‘Š", desc: "å¾®ä¿¡å°ç¨‹åº", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%92%8C%E5%BA%94%E7%94%A8%E6%87%92%E4%BA%BA%E5%8E%BB%E5%B9%BF%E5%91%8A%E5%90%88%E9%9B%86.official.sgmodule" },
            { name: "AWAvenue Ads Rule", desc: "ç§‹é£å¹¿å‘Šè§„åˆ™", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/AWAvenue-Ads-Rule-Surge-module.sgmodule" },
            { name: "Adblock4limbo", desc: "æ¯’å¥¶å»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/Adblock4limbo.sgmodule" },
            { name: "sukka_enhance_adblock", desc: "Sukkaå¢å¼ºå»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/sukka_enhance_adblock.sgmodule" },
            { name: "sukka_url_rewrite", desc: "Sukka URLé‡å†™", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/sukka_url_rewrite.sgmodule" },
            { name: "blockHTTPDNS", desc: "é˜»æ­¢HTTPDNS", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/blockHTTPDNS.module" },
            { name: "ğŸ”¥ Firewall Port Blocker", desc: "ç«¯å£é˜²ç«å¢™", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%F0%9F%94%A5%20Firewall%20Port%20Blocker%20%F0%9F%9B%A1%EF%B8%8F%F0%9F%9A%AB.sgmodule" },
            { name: "Universal Ad-Blocking LITE", desc: "é€šç”¨å»å¹¿å‘Šä¾èµ–", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/head_expanse/%F0%9F%9A%AB%20Universal%20Ad-Blocking%20Rules%20Dependency%20Component%20LITE%20%28Kali-style%29.sgmodule" }
        ]
    },
    "narrow_pierce": {
        name: "ğŸ¯ Narrow Pierce â€º çª„åŸŸç©¿åˆº",
        color: "#FF9800",
        desc: "Appä¸“é¡¹å»å¹¿å‘Š",
        items: [
            { name: "BiliBili.ADBlock", desc: "Bç«™å»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/BiliBili.ADBlock.sgmodule", tag: "bilibili" },
            { name: "Bilibili.Helper", desc: "Bç«™åŠ©æ‰‹", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/Bilibili.Helper.sgmodule", tag: "bilibili" },
            { name: "å“”å“©å“”å“©æ¼«ç”»å»å¹¿å‘Š", desc: "Bæ¼«å»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E6%BC%AB%E7%94%BB%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule", tag: "bilibili" },
            { name: "YouTube_remove_ads", desc: "YouTubeå»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/YouTube_remove_ads.sgmodule", tag: "youtube" },
            { name: "Weibo_remove_ads", desc: "å¾®åšå»å¹¿å‘Š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/Weibo_remove_ads.sgmodule" },
            { name: "WeChat_Enhance", desc: "å¾®ä¿¡å¢å¼º", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/WeChat_Enhance.sgmodule" },
            { name: "å°çº¢ä¹¦å»å¹¿å‘Š", desc: "å°çº¢ä¹¦", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E5%B0%8F%E7%BA%A2%E4%B9%A6%E5%8E%BB%E5%B9%BF%E5%91%8A.beta.sgmodule" },
            { name: "çŸ¥ä¹å»å¹¿å‘Š", desc: "çŸ¥ä¹", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E7%9F%A5%E4%B9%8E%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "æ·˜å®å»å¹¿å‘Š", desc: "æ·˜å®", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E6%B7%98%E5%AE%9D%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule", tag: "shopping" },
            { name: "äº¬ä¸œå»å¹¿å‘Š", desc: "äº¬ä¸œ", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E4%BA%AC%E4%B8%9C%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule", tag: "shopping" },
            { name: "æ‹¼å¤šå¤šå»å¹¿å‘Š", desc: "æ‹¼å¤šå¤š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E6%8B%BC%E5%A4%9A%E5%A4%9A%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule", tag: "shopping" },
            { name: "é—²é±¼å»å¹¿å‘Š", desc: "é—²é±¼", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E9%97%B2%E9%B1%BC%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule", tag: "shopping" },
            { name: "ç™¾åº¦ç½‘ç›˜å»å¹¿å‘Š", desc: "ç™¾åº¦ç½‘ç›˜", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "é˜¿é‡Œäº‘ç›˜å»å¹¿å‘Š", desc: "é˜¿é‡Œäº‘ç›˜", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "é«˜å¾·åœ°å›¾å»å¹¿å‘Š", desc: "é«˜å¾·åœ°å›¾", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "æ»´æ»´å‡ºè¡Œå»å¹¿å‘Š", desc: "æ»´æ»´å‡ºè¡Œ", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E6%BB%B4%E6%BB%B4%E5%87%BA%E8%A1%8C%E5%8E%BB%E5%B9%BF%E5%91%8A.beta.sgmodule" },
            { name: "èœé¸Ÿå»å¹¿å‘Š", desc: "èœé¸Ÿ", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E8%8F%9C%E9%B8%9F%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "12306å»å¹¿å‘Š", desc: "12306", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/12306%E5%8E%BB%E5%B9%BF%E5%91%8A.beta.sgmodule" },
            { name: "Spotifyå»å¹¿å‘Š", desc: "Spotify", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/Spotify%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "QQéŸ³ä¹å»å¹¿å‘Š", desc: "QQéŸ³ä¹", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/QQ%E9%9F%B3%E4%B9%90%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "å°å®‡å®™å»å¹¿å‘Š", desc: "å°å®‡å®™æ’­å®¢", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E5%B0%8F%E5%AE%87%E5%AE%99%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "å¤¸å…‹å»å¹¿å‘Š", desc: "å¤¸å…‹æµè§ˆå™¨", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/%E5%A4%B8%E5%85%8B%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "ITä¹‹å®¶å»å¹¿å‘Š", desc: "ITä¹‹å®¶", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/IT%E4%B9%8B%E5%AE%B6%E5%8E%BB%E5%B9%BF%E5%91%8A.beta.sgmodule" },
            { name: "Jumpå»å¹¿å‘Š", desc: "Jump", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/Jump%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "Redditå»å¹¿å‘Š", desc: "Reddit", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/Reddit%20%E5%8E%BB%E5%B9%BF%E5%91%8A.sgmodule" },
            { name: "10099", desc: "10099è”é€š", url: "https://raw.githubusercontent.com/nowaytouse/script_hub/master/module/surge%28main%29/narrow_pierce/10099.sgmodule" }
        ]
    }
};

// ä»localStorageåŠ è½½å·²å¤åˆ¶çŠ¶æ€
let copiedModules = JSON.parse(localStorage.getItem('surge_copied_modules') || '{}');

// ä¿å­˜çŠ¶æ€
function saveProgress() {
    localStorage.setItem('surge_copied_modules', JSON.stringify(copiedModules));
    updateStats();
}

// æ›´æ–°ç»Ÿè®¡
function updateStats() {
    let total = 0, copied = 0;
    Object.values(modules).forEach(cat => {
        total += cat.items.length;
        cat.items.forEach(m => {
            if (copiedModules[m.url]) copied++;
        });
    });
    document.getElementById('totalCount').textContent = total;
    document.getElementById('copiedCount').textContent = copied;
    document.getElementById('remainCount').textContent = total - copied;
}

// å¤åˆ¶URL
async function copyUrl(url, btn) {
    try {
        await navigator.clipboard.writeText(url);
        copiedModules[url] = Date.now();
        saveProgress();
        btn.textContent = 'âœ“ å·²å¤åˆ¶';
        btn.classList.add('copied');
        btn.closest('.module').classList.add('copied');
        
        // æ˜¾ç¤ºæç¤º
        showToast('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
    } catch (e) {
        // é™çº§æ–¹æ¡ˆ
        const ta = document.createElement('textarea');
        ta.value = url;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        
        copiedModules[url] = Date.now();
        saveProgress();
        btn.textContent = 'âœ“ å·²å¤åˆ¶';
        btn.classList.add('copied');
        btn.closest('.module').classList.add('copied');
    }
}

// æ˜¾ç¤ºæç¤º
function showToast(msg) {
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.textContent = msg;
    toast.style.cssText = 'position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#4CAF50;color:#fff;padding:10px 20px;border-radius:8px;z-index:1000;';
    document.body.appendChild(toast);
    setTimeout(() => toast.remove(), 1500);
}

// å¤åˆ¶æ‰€æœ‰å‰©ä½™
async function copyAllRemaining() {
    const remaining = [];
    Object.values(modules).forEach(cat => {
        cat.items.forEach(m => {
            if (!copiedModules[m.url]) remaining.push(m.url);
        });
    });
    if (remaining.length === 0) {
        showToast('æ‰€æœ‰æ¨¡å—éƒ½å·²å¤åˆ¶ï¼');
        return;
    }
    await navigator.clipboard.writeText(remaining.join('\n'));
    showToast(`å·²å¤åˆ¶ ${remaining.length} ä¸ªURL`);
}

// å¯¼å‡ºè¿›åº¦
function exportProgress() {
    const data = JSON.stringify(copiedModules, null, 2);
    const blob = new Blob([data], {type: 'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'surge_module_progress.json';
    a.click();
}

// é‡ç½®è¿›åº¦
function resetProgress() {
    if (confirm('ç¡®å®šè¦é‡ç½®æ‰€æœ‰è¿›åº¦å—ï¼Ÿ')) {
        copiedModules = {};
        localStorage.removeItem('surge_copied_modules');
        location.reload();
    }
}

// åˆ‡æ¢åˆ†ç±»å±•å¼€/æŠ˜å 
function toggleCategory(el) {
    el.closest('.category').classList.toggle('collapsed');
}
